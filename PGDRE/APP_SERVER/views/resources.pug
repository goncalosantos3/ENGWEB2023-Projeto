extends layout

block content
    .w3-card-4
    header.w3-container.w3-blue
      h1 Recursos 
        if u.level == "admin" || u.level == "producer"
          a(href="/resources/add") #[img.w3-margin(src="/images/add.png" alt="add icon" width="30" height="30")]

    .w3-container
      .w3-container
        h3 Pesquisa
        form.w3-container(action="/resources/search" method="POST")
          select(name="filtro")
            option(value="title") Título
            option(value="type") Tipo  
            option(value="author") Autor 
          input#search.w3-margin-bottom(type="text" name="search")        
          input.w3-margin-left(type="image" alt="search icon" src="/images/search.png" height="30" width="30") 
      hr

      table.w3-table-all
          tr
              th Título
              th Subtítulo
              th Tipo
              th Autor 
              th Submissor
              th Detalhes
              th Operações

          each r in rs 
              tr 
                  td= r.title
                  if r.subtitle != undefined 
                      td= r.subtitle
                  else 
                      td Indefinido
                  td= r.type
                  td= r.author
                  td= r.submitter
                  td  
                    a(href="/resources/" + r.resourceName)
                      img.w3-margin(src="/images/details.png" alt="details icon" width="30" height="30")
                  td  
                    a(href="/resources/download/" + r.resourceName) 
                      img.w3-round-xlarge.w3-margin(src="/images/download.png" alt="download icon" width="30" height="30")
                    if u.level == "admin" || (u.level == "producer" && r.author == u.username)
                      a(href="/resources/edit/" + r.resourceName)
                        img.w3-round-large.w3-margin(src="/images/edit.png" alt="edit icon" width="30" height="30")
                      a(href="/resources/delete/" + r.resourceName)
                        img.w3-round-large.w3-margin(src="/images/delete.png" alt="delete icon" width="30" height="30")

    footer.w3-container.w3-blue
      address Generated in PGDRE at #{d} | #[a(href="/home") Go back to home!]
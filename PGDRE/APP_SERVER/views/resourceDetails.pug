extends layout

block content
    .w3-card-4
    header.w3-container.w3-blue
      h1 Recurso: #[i #{r.resourceName}]

    .w3-container
        ul.w3-ul 
            li #[b Ficheiros: ]
              ul.w3-ul 
                each f in r.files
                  li= f
            li #[b Título: ] #{r.title}
            li #[b Subtítulo: ] #{r.subtitle}
            li #[b Tipo: ] #{r.type}
            li #[b Autor: ] #{r.author}
            li #[b Operations:] 
                a(href="/resources/download/" + r.resourceName) 
                  img.w3-round-xlarge.w3-margin(src="/images/download.png" alt="download icon" width="30" height="30")
                if u.level == "admin" || (u.level == "producer" && r.author == u.username)
                  a(href="/resources/edit/" + r.resourceName)
                    img.w3-round-large.w3-margin(src="/images/edit.png" alt="edit icon" width="30" height="30")
                  a(href="/resources/delete/" + r.resourceName)
                    img.w3-round-large.w3-margin(src="/images/delete.png" alt="delete icon" width="30" height="30")

        .w3-card-4
            header.w3-container.w3-purple
                h1 Posts #[a(href="/resources/" + r.resourceName + "/posts/add") #[img.w3-margin(src="/images/add.png" alt="add icon" width="30" height="30")]]

            .w3-container
                table.w3-table-all
                    tr 
                        th Utilizador
                        th Título
                        th Descrição
                        th Gostos
                        th Date
                        th Detalhes
                        th Operações

                    each p in ps 
                        tr 
                            td= p.username
                            td= p.title
                            td= p.description
                            td= p.liked_by.length
                            td= p.date
                            td  
                              a(href="/resources/" + r.resourceName + "/posts/" + p._id)
                                img(src="/images/details.png" alt="details icon" width="30" height="30")
                            if u.level == "admin" || u.username == p.username
                              td 
                                a.w3-margin(href="/resources/" + r.resourceName + "/posts/" + p._id + "/edit")
                                  img(src="/images/edit.png" alt="edit icon" width="30" height="30")
                                a.w3-margin(href="/resources/" + r.resourceName + "/posts/" + p._id + "/delete")
                                  img(src="/images/delete.png" alt="delete icon" width="30" height="30")

    footer.w3-container.w3-blue
      address Generated in PGDRE at #{d} | #[a(href="/home") Go back to home!]